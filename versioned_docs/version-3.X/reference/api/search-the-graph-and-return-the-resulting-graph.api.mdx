---
id: search-the-graph-and-return-the-resulting-graph
title: "Search the graph and return the resulting graph."
description: "Search the graph and return the matching nodes including the traversed edges."
sidebar_label: "Search the graph and return the resulting graph."
hide_title: true
hide_table_of_contents: true
api: {"description":"Search the graph and return the matching nodes including the traversed edges.\nThe resulting data can be interpreted as a graph.\nA section can be defined (defaults to `/` == root) to interpret relative property paths.\nExample: is(volume) and (reported.age>23d or desired.clean==true or metadata.version==2)\n","tags":["graph_search"],"parameters":[{"name":"graph_id","in":"path","description":"The identifier of the graph","example":"resoto","required":true,"schema":{"type":"string"}},{"name":"section","in":"query","description":"The name of the section used for all property paths. If not defined root is assumed.","required":false,"schema":{"type":"string","enum":["reported","desired","metadata"]}},{"name":"count","in":"query","description":"Optional parameter to get a Ck-Element-Count header which returns the number of returned json elements","required":false,"schema":{"type":"boolean","default":true}},{"name":"search_timeout","in":"query","description":"Optional duration the search is allowed to run.","required":false,"schema":{"type":"string","example":"30s"}}],"requestBody":{"description":"The search to perform","content":{"text/plain":{"schema":{"type":"string","example":"is(graph_root) and reported.name==\"root\" -->"}}}},"responses":{"200":{"description":"The result of this search in the defined format","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","additionalProperties":true,"properties":{"kind":{"type":"string","description":"The kind of this node."}},"example":{"kind":"test.person","name":"Batman","city":"Gotham"}}}},"application/x-ndjson":{"schema":{"type":"object","additionalProperties":true,"properties":{"kind":{"type":"string","description":"The kind of this node."}},"example":{"kind":"test.person","name":"Batman","city":"Gotham"}},"example":"{\"type\": \"node\", \"id\": \"root\", \"revision\": \"123\", \"reported\": {\"kind\": \"graph_root\", \"id\": \"root\", \"tags\": {}, \"name\": \"root\"}}\n{\"type\": \"node\", \"id\": \"cloud_id\",  \"revision\": \"12\", \"reported\": {\"kind\": \"cloud\", \"id\": \"onelogin\", \"tags\": {}, \"name\": \"onelogin\", \"ctime\": \"2021-12-14T08:49:52Z\", \"age\": \"6d7h\"}}\n{\"type\": \"edge\", \"from\": \"root\", \"to\": \"cloud_id\", \"edge_type\": \"default\"}\n"},"text/plain":{"example":"reported:\n  kind: graph_root\n  id: root\n  tags: {}\n  name: root\nmetadata:\n  cleaned: false\n  phantom: true\n  protected: false\n"},"application/yaml":{"example":"id: root\ntype: node\nrevision: _daGy-Bu---\nreported:\n    kind: graph_root\n    id: root\n    tags: { }\n    name: root\nmetadata:\n    python_type: resotolib.baseresources.GraphRoot\n    cleaned: false\n    phantom: true\n    protected: false\nkinds:\n    - graph_root\n---\nid: 2RZlTX9yzeBwTNT_H1KZVA\ntype: node\nrevision: _daGy-Bi---\nreported:\n    kind: cloud\n    id: onelogin\n    tags: { }\n    name: onelogin\n    ctime: '2021-12-14T08:49:52Z'\n    age: 6d7h\nmetadata:\n    python_type: resotolib.baseresources.Cloud\n    cleaned: false\n    phantom: false\n    protected: false\n    descendant_summary:\n        onelogin_account: 1\n        onelogin_region: 1\n        onelogin_user: 1034\n    descendant_count: 1036\nancestors:\n    cloud:\n        reported:\n            name: onelogin\n            id: onelogin\nkinds:\n    - cloud\n    - base_cloud\n    - resource\n---\ntype: edge\nfrom: root\nto: 2RZlTX9yzeBwTNT_H1KZVA\nedge_type: default\n"},"application/vnd.graphml+xml":{"example":"<graphml xmlns=\"http://graphml.graphdrawing.org/xmlns\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://graphml.graphdrawing.org/xmlns http://graphml.graphdrawing.org/xmlns/1.0/graphml.xsd\">\n    <key id=\"d4\" for=\"node\" attr.name=\"age\" attr.type=\"string\"/>\n    <key id=\"d3\" for=\"node\" attr.name=\"ctime\" attr.type=\"string\"/>\n    <key id=\"d2\" for=\"node\" attr.name=\"name\" attr.type=\"string\"/>\n    <key id=\"d1\" for=\"node\" attr.name=\"id\" attr.type=\"string\"/>\n    <key id=\"d0\" for=\"node\" attr.name=\"kind\" attr.type=\"string\"/>\n    <graph edgedefault=\"directed\">\n        <node id=\"root\">\n            <data key=\"d0\">graph_root</data>\n            <data key=\"d1\">root</data>\n            <data key=\"d2\">root</data>\n        </node>\n        <node id=\"cloud_id\">\n            <data key=\"d0\">cloud</data>\n            <data key=\"d1\">onelogin</data>\n            <data key=\"d2\">onelogin</data>\n            <data key=\"d3\">2021-12-14T08:49:52Z</data>\n            <data key=\"d4\">6d7h</data>\n        </node>\n        <edge source=\"root\" target=\"cloud_id\"/>\n    </graph>\n</graphml>\n"},"application/vnd.cytoscape+json":{"example":"{\n    \"data\": [ ],\n    \"directed\": true,\n    \"elements\": {\n        \"edges\": [\n            {\n                \"data\": {\n                    \"source\": \"root\",\n                    \"target\": \"cloud_id\"\n                }\n            }\n        ],\n        \"nodes\": [\n            {\n                \"data\": {\n                    \"id\": \"root\",\n                    \"kind\": \"graph_root\",\n                    \"name\": \"root\",\n                    \"tags\": { },\n                    \"value\": \"root\"\n                }\n            },\n            {\n                \"data\": {\n                    \"age\": \"6d7h\",\n                    \"ctime\": \"2021-12-14T08:49:52Z\",\n                    \"id\": \"onelogin\",\n                    \"kind\": \"cloud\",\n                    \"name\": \"onelogin\",\n                    \"tags\": { },\n                    \"value\": \"cloud_id\"\n                }\n            }\n        ]\n    },\n    \"multigraph\": false\n}\n"},"text/vnd.graphviz":{"example":"digraph {\nrankdir=LR\noverlap=false\nsplines=true\nnode [shape=Mrecord colorscheme=paired12]\nedge [arrowsize=0.5]\n  \"root\" [label=\"root|graph_root\", style=filled fillcolor=1];\n  \"2RZlTX9yzeBwTNT_H1KZVA\" [label=\"onelogin|cloud\", style=filled fillcolor=2];\n  \"root\" -> \"2RZlTX9yzeBwTNT_H1KZVA\"\n  subgraph \"graph_root\" {\n    \"root\"\n    \"2RZlTX9yzeBwTNT_H1KZVA\"\n  }\n}\n"}}}},"method":"post","path":"/graph/{graph_id}/search/graph","servers":[{"url":"https://{host}:{port}","variables":{"host":{"default":"localhost"},"port":{"default":"8900"}}}],"info":{"title":"Resoto Core REST API","version":"V1"},"postman":{"name":"Search the graph and return the resulting graph.","description":{"content":"Search the graph and return the matching nodes including the traversed edges.\nThe resulting data can be interpreted as a graph.\nA section can be defined (defaults to `/` == root) to interpret relative property paths.\nExample: is(volume) and (reported.age>23d or desired.clean==true or metadata.version==2)\n","type":"text/plain"},"url":{"path":["graph",":graph_id","search","graph"],"host":["{{baseUrl}}"],"query":[{"disabled":false,"description":{"content":"The name of the section used for all property paths. If not defined root is assumed.","type":"text/plain"},"key":"section","value":""},{"disabled":false,"description":{"content":"Optional parameter to get a Ck-Element-Count header which returns the number of returned json elements","type":"text/plain"},"key":"count","value":""},{"disabled":false,"description":{"content":"Optional duration the search is allowed to run.","type":"text/plain"},"key":"search_timeout","value":""}],"variable":[{"disabled":false,"description":{"content":"(Required) The identifier of the graph","type":"text/plain"},"type":"any","value":"","key":"graph_id"}]},"header":[{"key":"Content-Type","value":"text/plain"},{"key":"Accept","value":"application/json"}],"method":"POST","body":{"mode":"raw","raw":"\"\""}}}
sidebar_class_name: "post api-method"
info_path: versioned_docs/version-3.X/reference/api/resoto-core-rest-api
---

import ApiTabs from "@theme/ApiTabs";
import MimeTabs from "@theme/MimeTabs";
import ParamsItem from "@theme/ParamsItem";
import ResponseSamples from "@theme/ResponseSamples";
import SchemaItem from "@theme/SchemaItem"
import SchemaTabs from "@theme/SchemaTabs";
import DiscriminatorTabs from "@theme/DiscriminatorTabs";
import TabItem from "@theme/TabItem";

## Search the graph and return the resulting graph.

Search the graph and return the matching nodes including the traversed edges. The resulting data can be interpreted as a graph. A section can be defined (defaults to `/` == root) to interpret relative property paths. Example: is(volume) and (reported.age>23d or desired.clean==true or metadata.version==2)

<details style={{"marginBottom":"1rem"}} data-collapsed={false} open={true}><summary style={{}}><strong>Path Parameters</strong></summary><div><ul><ParamsItem className={"paramsItem"} param={{"name":"graph_id","in":"path","description":"The identifier of the graph","example":"resoto","required":true,"schema":{"type":"string"}}}></ParamsItem></ul></div></details><details style={{"marginBottom":"1rem"}} data-collapsed={false} open={true}><summary style={{}}><strong>Query Parameters</strong></summary><div><ul><ParamsItem className={"paramsItem"} param={{"name":"section","in":"query","description":"The name of the section used for all property paths. If not defined root is assumed.","required":false,"schema":{"type":"string","enum":["reported","desired","metadata"]}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"count","in":"query","description":"Optional parameter to get a Ck-Element-Count header which returns the number of returned json elements","required":false,"schema":{"type":"boolean","default":true}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"search_timeout","in":"query","description":"Optional duration the search is allowed to run.","required":false,"schema":{"type":"string","example":"30s"}}}></ParamsItem></ul></div></details><MimeTabs><TabItem label={"text/plain"} value={"text/plain-schema"}><details style={{}} data-collapsed={false} open={true}><summary style={{"textAlign":"left"}}><strong>Request Body</strong></summary><div style={{"textAlign":"left","marginLeft":"1rem"}}><div style={{"marginTop":"1rem","marginBottom":"1rem"}}>

The search to perform

</div></div><ul style={{"marginLeft":"1rem"}}><li><div><strong>string</strong></div></li></ul></details></TabItem></MimeTabs><div><ApiTabs><TabItem label={"200"} value={"200"}><div>

The result of this search in the defined format

</div><div><MimeTabs schemaType={"response"}><TabItem label={"application/json"} value={"application/json"}><SchemaTabs><TabItem label={"Schema"} value={"Schema"}><details style={{}} data-collapsed={false} open={true}><summary style={{"textAlign":"left"}}><strong>Schema</strong><span style={{"opacity":"0.6"}}> array</span></summary><div style={{"textAlign":"left","marginLeft":"1rem"}}></div><ul style={{"marginLeft":"1rem"}}><SchemaItem collapsible={false} name={"kind"} required={false} schemaDescription={"The kind of this node."} schemaName={"string"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem></ul></details></TabItem><TabItem label={"Example (from schema)"} value={"Example (from schema)"}><ResponseSamples responseExample={"[\n  {\n    \"kind\": \"test.person\",\n    \"name\": \"Batman\",\n    \"city\": \"Gotham\"\n  }\n]"} language={"json"}></ResponseSamples></TabItem></SchemaTabs></TabItem><TabItem label={"application/x-ndjson"} value={"application/x-ndjson"}><SchemaTabs><TabItem label={"Schema"} value={"Schema"}><details style={{}} data-collapsed={false} open={true}><summary style={{"textAlign":"left"}}><strong>Schema</strong></summary><div style={{"textAlign":"left","marginLeft":"1rem"}}></div><ul style={{"marginLeft":"1rem"}}><SchemaItem collapsible={false} name={"kind"} required={false} schemaDescription={"The kind of this node."} schemaName={"string"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem></ul></details></TabItem><TabItem label={"Example (from schema)"} value={"Example (from schema)"}><ResponseSamples responseExample={"{\n  \"kind\": \"test.person\",\n  \"name\": \"Batman\",\n  \"city\": \"Gotham\"\n}"} language={"json"}></ResponseSamples></TabItem><TabItem label={"Example"} value={"Example"}><ResponseSamples responseExample={"{\"type\": \"node\", \"id\": \"root\", \"revision\": \"123\", \"reported\": {\"kind\": \"graph_root\", \"id\": \"root\", \"tags\": {}, \"name\": \"root\"}}\n{\"type\": \"node\", \"id\": \"cloud_id\",  \"revision\": \"12\", \"reported\": {\"kind\": \"cloud\", \"id\": \"onelogin\", \"tags\": {}, \"name\": \"onelogin\", \"ctime\": \"2021-12-14T08:49:52Z\", \"age\": \"6d7h\"}}\n{\"type\": \"edge\", \"from\": \"root\", \"to\": \"cloud_id\", \"edge_type\": \"default\"}\n"} language={"json"}></ResponseSamples></TabItem></SchemaTabs></TabItem><TabItem label={"text/plain"} value={"text/plain"}><SchemaTabs><TabItem label={"Example"} value={"Example"}><ResponseSamples responseExample={"reported:\n  kind: graph_root\n  id: root\n  tags: {}\n  name: root\nmetadata:\n  cleaned: false\n  phantom: true\n  protected: false\n"} language={"shell"}></ResponseSamples></TabItem></SchemaTabs></TabItem><TabItem label={"application/yaml"} value={"application/yaml"}><SchemaTabs><TabItem label={"Example"} value={"Example"}><ResponseSamples responseExample={"id: root\ntype: node\nrevision: _daGy-Bu---\nreported:\n    kind: graph_root\n    id: root\n    tags: { }\n    name: root\nmetadata:\n    python_type: resotolib.baseresources.GraphRoot\n    cleaned: false\n    phantom: true\n    protected: false\nkinds:\n    - graph_root\n---\nid: 2RZlTX9yzeBwTNT_H1KZVA\ntype: node\nrevision: _daGy-Bi---\nreported:\n    kind: cloud\n    id: onelogin\n    tags: { }\n    name: onelogin\n    ctime: '2021-12-14T08:49:52Z'\n    age: 6d7h\nmetadata:\n    python_type: resotolib.baseresources.Cloud\n    cleaned: false\n    phantom: false\n    protected: false\n    descendant_summary:\n        onelogin_account: 1\n        onelogin_region: 1\n        onelogin_user: 1034\n    descendant_count: 1036\nancestors:\n    cloud:\n        reported:\n            name: onelogin\n            id: onelogin\nkinds:\n    - cloud\n    - base_cloud\n    - resource\n---\ntype: edge\nfrom: root\nto: 2RZlTX9yzeBwTNT_H1KZVA\nedge_type: default\n"} language={"shell"}></ResponseSamples></TabItem></SchemaTabs></TabItem><TabItem label={"application/vnd.graphml+xml"} value={"application/vnd.graphml+xml"}><SchemaTabs><TabItem label={"Example"} value={"Example"}><ResponseSamples responseExample={"<graphml xmlns=\"http://graphml.graphdrawing.org/xmlns\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://graphml.graphdrawing.org/xmlns http://graphml.graphdrawing.org/xmlns/1.0/graphml.xsd\">\n    <key id=\"d4\" for=\"node\" attr.name=\"age\" attr.type=\"string\"/>\n    <key id=\"d3\" for=\"node\" attr.name=\"ctime\" attr.type=\"string\"/>\n    <key id=\"d2\" for=\"node\" attr.name=\"name\" attr.type=\"string\"/>\n    <key id=\"d1\" for=\"node\" attr.name=\"id\" attr.type=\"string\"/>\n    <key id=\"d0\" for=\"node\" attr.name=\"kind\" attr.type=\"string\"/>\n    <graph edgedefault=\"directed\">\n        <node id=\"root\">\n            <data key=\"d0\">graph_root</data>\n            <data key=\"d1\">root</data>\n            <data key=\"d2\">root</data>\n        </node>\n        <node id=\"cloud_id\">\n            <data key=\"d0\">cloud</data>\n            <data key=\"d1\">onelogin</data>\n            <data key=\"d2\">onelogin</data>\n            <data key=\"d3\">2021-12-14T08:49:52Z</data>\n            <data key=\"d4\">6d7h</data>\n        </node>\n        <edge source=\"root\" target=\"cloud_id\"/>\n    </graph>\n</graphml>\n"} language={"xml"}></ResponseSamples></TabItem></SchemaTabs></TabItem><TabItem label={"application/vnd.cytoscape+json"} value={"application/vnd.cytoscape+json"}><SchemaTabs><TabItem label={"Example"} value={"Example"}><ResponseSamples responseExample={"{\n    \"data\": [ ],\n    \"directed\": true,\n    \"elements\": {\n        \"edges\": [\n            {\n                \"data\": {\n                    \"source\": \"root\",\n                    \"target\": \"cloud_id\"\n                }\n            }\n        ],\n        \"nodes\": [\n            {\n                \"data\": {\n                    \"id\": \"root\",\n                    \"kind\": \"graph_root\",\n                    \"name\": \"root\",\n                    \"tags\": { },\n                    \"value\": \"root\"\n                }\n            },\n            {\n                \"data\": {\n                    \"age\": \"6d7h\",\n                    \"ctime\": \"2021-12-14T08:49:52Z\",\n                    \"id\": \"onelogin\",\n                    \"kind\": \"cloud\",\n                    \"name\": \"onelogin\",\n                    \"tags\": { },\n                    \"value\": \"cloud_id\"\n                }\n            }\n        ]\n    },\n    \"multigraph\": false\n}\n"} language={"json"}></ResponseSamples></TabItem></SchemaTabs></TabItem><TabItem label={"text/vnd.graphviz"} value={"text/vnd.graphviz"}><SchemaTabs><TabItem label={"Example"} value={"Example"}><ResponseSamples responseExample={"digraph {\nrankdir=LR\noverlap=false\nsplines=true\nnode [shape=Mrecord colorscheme=paired12]\nedge [arrowsize=0.5]\n  \"root\" [label=\"root|graph_root\", style=filled fillcolor=1];\n  \"2RZlTX9yzeBwTNT_H1KZVA\" [label=\"onelogin|cloud\", style=filled fillcolor=2];\n  \"root\" -> \"2RZlTX9yzeBwTNT_H1KZVA\"\n  subgraph \"graph_root\" {\n    \"root\"\n    \"2RZlTX9yzeBwTNT_H1KZVA\"\n  }\n}\n"} language={"shell"}></ResponseSamples></TabItem></SchemaTabs></TabItem></MimeTabs></div></TabItem></ApiTabs></div>
